\chapter{Datenbank}
Da in diesem Projekt eine NoSQL Datenbank verwendet wird, gibt es kein Datenbanklayout im klassischen Sinne.
Regeln für die Strukturierung von Daten wie Normalformen bei Relationalen Datenbanken gibt es bei MongoDB nicht.

Dennoch gibt es einige Punkte die zu beachten sind:
\begin{itemize}
    \item Limit von 16\ac{MB} Pro Dokument
    \item Einbetten ist bei NoSQL Datenbanken zu bevorzugen, jedoch nicht immer passend
    \item Arrays sollten nicht unendlich wachsen können
\end{itemize}

Es folgt die vorläufige Struktur für die verschiedenen Dokumente.
Der genaue Inhalt wird angefügt, sobald dieser bekannt wird.

\section{Settings}

\begin{lstlisting}[label={lst:lstlistingusers}]
    // Settings Document
    {
    id: string
    settings:
        {
            ...
        }
    }

\end{lstlisting}

\section{Autofill}
\begin{lstlisting}[label={lst:lstlistingauto}]
    // Autofill Document
    {
    Userid: ref
    pairs:
        [
            {
                key:value
            },
            {
            ...
            }
        ]
    }

\end{lstlisting}

\section{Form}\label{sec:form}
Das Form-Dokument definiert die Struktur, in welcher Formulare gespeichert werden.
Hierbei werden verschiedene \gls{enum}s verwendet, welche im Folgenden näher beschrieben werden.


'EFormElement' beschreibt die verschiedenen Feldtypen, welche dargestellt werden sollen.
\begin{lstlisting}[label={lst:EFormElement}]
    public enum EFormElement {
        text,
        address,
        iban,
        date,
        money,
        TextMultiLine,
        bool
    }
\end{lstlisting}


'ECategory' ermöglicht die Unterteilung eines Formulars in fest definierte Kategorien
\begin{lstlisting}[label={lst:ECategory}]
    public enum ECategory {
        Antrag,
        Abrechnung
    }
\end{lstlisting}

Das Form-Dokument selbst ist im Folgenden beschrieben.
Der Boolean "Template" dient hierbei zur Unterscheidung zwischen
Form-Dokumenten, welche beschrieben, wie das Formular dem Nutzer
dargestellt werden soll, sowie jenen, welche Daten enthalten.

Sollte es sich nicht um eine Vorlage zum Ausfüllen handeln, so werden nur die notwendigen Informationen erfasst.
\begin{lstlisting}[label={lst:lstlistingdoc}]
    {
        "id": string,
        "owner": string,
        "Title": string,
        "Template": bool,
        "Description": string,
        "Category": ECategory
        "form":[
            {
                "order": integer,
                "section": string,
                "items": [
                    {
                        "Description": string,
                        "type": EFormElement,
                        "id": string,
                        "value" string
                    },
                    {
                        "Description": string,
                        "type": EFormElement,
                        "id": string,
                        "value" string
                    }
                ]
            },
            {
                "order": integer,
                "section": string,
                "items": [
                    {
                        "Description": string,
                        "type": EFormElement,
                        "id": string,
                        "value" string
                    },
                    ...
                ]
            },
            {
                ...
            }
        ],
        "Attachments":[
            {
                "id": string,
                "Description": string
            }
        ]
    }
\end{lstlisting}